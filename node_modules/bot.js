const Public = require('public');
const Fs = require('fs');
const Bot = require('bot');
const Discord = require('discord.js');
const ErrorMessages = require('insultes');

var ping = function(message) {
    message.channel.send('pong');
}

var replyCmd = function(message) {
    console.log('Received: ' + message.content);

    splittedCmd = message.content.split(' ');

    if (splittedCmd[0] == '/cmd') {
        if (splittedCmd[1] == 'help') {
            message.channel.send(
"```Markdown\nhelp: Affiche commandes disponibles\n\
ping: Répond 'pong'\n\
link: donne le lien de l'avatar de l'auteur\n\
random <min> <max>: générer un nombre entre min et max\n```"
                        );

        } else if (splittedCmd[1] == 'ping') {
            ping(message);

        } else if(splittedCmd[1] == 'disconnect') {
            client.destroy();
        
        } else if(splittedCmd[1] == 'link') {
            message.reply(message.author.avatarURL);
        
        } else if(splittedCmd[1] == 'random') {
            if (splittedCmd.length == 4) { // La commande devrait contenir 4 éléments (/cmd random <min> <max>)
                if (Number(splittedCmd[2]) != NaN && Number(splittedCmd[3] != NaN)) {
                    message.reply(Math.floor((Math.random() * String(splittedCmd[3])) + String(splittedCmd[2])));
                } else {
                    message.reply('ENTRE DES NOMBRES SALOPE(et pas du texte) !');
                }
            } else {
                message.reply('MAIS GROS PD TU SAIS PAS ÉCRIRE OÙ QUOI ?\nSYNTAXE: /cmd random <min> <max>');
            }

        } else {
            message.reply('MAIS ÉCRIS CORRECTEMENT GROS ENCULÉ !');
        }
    }
}

var insulter = function() {
    for (var i = 0; i < ErrorMessages['ERREURS']['INCONNU'].length; i++) {
        console.log(ErrorMessages['ERREURS']['INCONNU'][i]);
    } 
}

exports.insulter = insulter;
exports.replyCmd = replyCmd;